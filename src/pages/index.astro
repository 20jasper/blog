---
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import BaseLayout from '../layouts/BaseLayout.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout
	title={SITE_TITLE}
	description={SITE_DESCRIPTION}
>
	<main class="m-auto max-w-prose text-xl">
		<section>
			<h2 class="mb-4 text-2xl font-semibold">Blogs</h2>
			<ul class="flex flex-col gap-8">
				{
					posts.map((post) => (
						<li>
							<a
								href={`/blog/${post.slug}/`}
								class="block"
							>
								<h4 class="leading-none text-[rgb(var(--black))]">
									{post.data.title}
								</h4>
								<p class="m-0 text-[rgb(var(--gray))]">
									<FormattedDate date={post.data.pubDate} />
								</p>
							</a>
						</li>
					))
				}
			</ul>
		</section>
	</main>
</BaseLayout>
